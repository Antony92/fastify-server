generator client {
  provider = "prisma-client-js"
  previewFeatures = ["metrics"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  GUEST
  ADMIN
}

enum ServerEventType {
  info
  warning
  error
}

model User {
  id       String    @id @default(uuid())
  name     String
  username String    @unique()
  roles    Role[]    @default([GUEST])
  active   Boolean   @default(true)
  created  DateTime  @default(now())
  updated  DateTime  @updatedAt()
}

model AuditLog {
  id       String   @id @default(uuid())
  username String
  name     String
  action   String
  target   String
  data     Json
  message  String?
  created  DateTime @default(now())
}

model ServerEvent {
  id      String          @id @default(uuid())
  type    ServerEventType @default(info)
  message String
  created DateTime        @default(now())
  updated DateTime        @updatedAt()
}
